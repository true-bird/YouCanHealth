package com.matnagu.myHell.community;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping(value = "/community")
public class CommunityController {
	// �۾���
	@RequestMapping(value = "/createPost")
	public String createPost() {
		return "community/createPost";
	}
	// 글 읽기
	@RequestMapping(value = "/readPost")
	public ModelAndVieww readPost(@RequestParam("seq") int seq, Model model,HttpServletRequest request) {
		CommunityDto communityDto = CommunityServiceImpl.selectCommunity(seq); // 해당 글 내용 담기
		CommunityServiceImpl.updateHit(seq);
		model.addAttribute("communityDto", communityDto);
		HttpSession session=request.getSession();
		//System.out.println("myId3=" + myId);
		UserDto userDto = UserServiceImpl.selectUserId((String)session.getAttribute("myId2")); //세션 정보를 받아서 같은 아이디 정보 가져오기
		model.addAttribute("userDto", userDto);
		List<CommentDto> commentList = CommentServiceImpl.selectCommentAllList(seq);// 글에 해당하는 댓글 담기

		if (commentList.size() > 0) { // 댓글이 0이면 담지 않는다.
			model.addAttribute("list", commentList);
		}

		ModelAndView mv = new ModelAndView("community/Content");
		return mv;
	}
	
	// ��������
	@RequestMapping(value = "/Notice")
	public String notice() {
		return "community/Notice";
	}
	// �����
	@RequestMapping(value = "/HoneyTip")
	public String honeyTip() {
		return "community/HoneyTip";
	}
	// ���
	@RequestMapping(value = "/PassTime")
	public String passTime() {
		return "community/PassTime";
	}
}
